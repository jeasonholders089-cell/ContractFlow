# AI 合同审查系统 - 启动流程

本文档说明如何启动 AI 合同审查系统的所有服务。

## 项目结构

```
AI合同审查/
├── backend/                    # Python FastAPI 后端服务
│   ├── main.py                # 后端入口文件
│   └── requirements.txt       # Python 依赖
├── contract-suite-website/     # React 前端网站
│   ├── src/                   # 源代码
│   └── package.json           # Node.js 依赖
├── index.html                  # 合同审查/撰写页面（主应用）
├── js/                        # 前端 JavaScript
└── storage/                   # 文件存储目录
```

## 服务说明

| 服务 | 端口 | 说明 |
|------|------|------|
| React 前端网站 | 5173/5174 | 营销展示网站 |
| 合同审查页面 | 5500 | 主应用界面 |
| 后端 API | 8000 | FastAPI 服务 |

---

## 启动步骤

### 1. 启动后端 API 服务

后端使用 FastAPI 框架，提供合同审查的 AI 接口。

**首次运行需要安装依赖：**
```bash
cd backend
pip install -r requirements.txt
```

**启动后端服务：**
```bash
cd backend
python main.py
```

或使用 uvicorn：
```bash
cd backend
uvicorn main:app --host 127.0.0.1 --port 8000 --reload
```

**验证后端启动：**
- 访问 http://127.0.0.1:8000
- API 文档：http://127.0.0.1:8000/docs

---

### 2. 启动合同审查页面（主应用）

主应用位于根目录的 `index.html`，需要通过 HTTP 服务器访问。

**方法一：使用 Python HTTP Server（推荐）**
```bash
cd "f:\Agent项目\AI合同审查"
python -m http.server 5500
```

**方法二：使用 VSCode Live Server**
1. 在 VSCode 中右键点击根目录的 `index.html`
2. 选择 "Open with Live Server"

**验证启动：**
- 访问 http://localhost:5500/index.html

---

### 3. 启动 React 前端网站

React 网站是营销展示页面，包含产品介绍、功能展示等。

**首次运行需要安装依赖：**
```bash
cd contract-suite-website
npm install
```

**启动开发服务器：**
```bash
cd contract-suite-website
npm run dev
```

**验证启动：**
- 默认访问 http://localhost:5173
- 如果 5173 端口被占用，Vite 会自动切换到 5174

---

## 服务访问地址

启动成功后，可通过以下地址访问：

| 服务 | URL | 说明 |
|------|-----|------|
| 营销网站首页 | http://localhost:5173 或 5174 | React 营销页面 |
| 合同审查系统 | http://localhost:5500/index.html | 主应用 |
| 后端 API | http://127.0.0.1:8000 | API 接口 |
| API 文档 | http://127.0.0.1:8000/docs | Swagger 文档 |

---

## 页面跳转流程

1. 用户访问营销网站 (http://localhost:5173)
2. 点击 "立即开始免费试用" 按钮
3. 在新标签页中打开合同审查系统 (http://localhost:5500/index.html)
4. 合同审查页面调用后端 API (http://127.0.0.1:8000)

---

## 停止服务

### 停止后台服务

在运行服务的终端按 `Ctrl+C` 停止服务。

### 查找并终止占用端口的进程

如果端口被占用，可以使用以下命令：

**Windows:**
```bash
# 查看占用端口的进程
netstat -ano | findstr "端口号"

# 终止进程
taskkill /F /PID <进程ID>
```

**示例：**
```bash
# 查看 5500 端口
netstat -ano | findstr "5500"

# 终止进程（假设 PID 是 12345）
taskkill /F /PID 12345
```

---

## 依赖要求

### 后端依赖（Python）
- Python 3.9+
- 详见 `backend/requirements.txt`

### 前端依赖（Node.js）
- Node.js 16+
- npm 或 yarn
- 详见 `contract-suite-website/package.json`

---

## 常见问题

### Q: 端口被占用怎么办？
A: Vite 会自动尝试下一个可用端口。对于手动指定的端口（5500, 8000），请先停止占用该端口的进程。

### Q: 后端 API 调用失败？
A: 确认后端服务是否启动，检查 http://127.0.0.1:8000/health 是否返回正常。

### Q: 点击按钮没有跳转？
A: 确认合同审查页面的服务器（端口 5500）是否已启动。

---

## 开发模式 vs 生产模式

### 开发模式
- 使用 `npm run dev` 启动 React（支持热重载）
- 使用 `python main.py` 启动后端（支持自动重载）
- 适合开发调试

### 生产模式
```bash
# 构建 React 前端
cd contract-suite-website
npm run build

# 使用 nginx 等服务器托管 dist 目录
# 后端使用 gunicorn 或 uvicorn 启动
```

---

## 快速启动脚本

Windows 用户可以创建批处理脚本一键启动所有服务：

**start.bat**
```batch
@echo off
start "Backend API" cmd /k "cd backend && python main.py"
timeout /t 2 /nobreak > nul
start "Contract App" cmd /k "python -m http.server 5500"
timeout /t 2 /nobreak > nul
start "React Frontend" cmd /k "cd contract-suite-website && npm run dev"
echo All services started!
```

---

## 联系与支持

如有问题，请查看项目 README.md 或提交 Issue。
