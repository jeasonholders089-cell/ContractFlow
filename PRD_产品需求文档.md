# ContractFlow - AI合同审查系统 产品需求文档

## 文档信息

| 项目 | 内容 |
|------|------|
| 产品名称 | ContractFlow - AI合同审查系统 |
| 文档版本 | v1.0 |
| 创建日期 | 2026-01-28 |
| 文档状态 | 初稿 |

---

## 1. 产品概述

### 1.1 产品简介

ContractFlow 是一款基于人工智能的智能合同审查与管理平台。系统利用阿里云通义千问大语言模型，为用户提供自动化的合同风险识别、问题定位和修改建议服务。用户只需上传 Word 格式的合同文档，系统即可在短时间内完成全面的法律风险审查，并生成带有批注的审查报告。

### 1.2 产品定位

- **产品类型**: B2B/B2C SaaS 服务平台
- **核心价值**: 降低合同审查成本，提高审查效率，减少法律风险
- **差异化优势**: AI 智能审查 + 精准问题定位 + 自动批注生成

### 1.3 产品愿景

成为企业和个人用户首选的智能合同管理助手，让合同审查变得简单、高效、可靠。

---

## 2. 目标用户

### 2.1 用户画像

| 用户类型 | 描述 | 核心需求 |
|----------|------|----------|
| 中小企业 | 无专职法务人员的企业 | 快速、低成本的合同审查服务 |
| 法律从业者 | 律师、法务人员 | 提高审查效率，辅助人工审查 |
| 创业公司 | 初创团队 | 规避合同风险，保护企业利益 |
| 个人用户 | 自由职业者、个体户 | 简单易用的合同风险评估工具 |

### 2.2 使用场景

1. **日常合同审查**: 企业收到合作方合同，需要快速评估风险
2. **批量合同处理**: 法务部门需要处理大量标准化合同
3. **合同谈判准备**: 在签约前识别不利条款，准备谈判要点
4. **合规检查**: 确保合同符合公司政策和法律法规要求

---

## 3. 产品目标

### 3.1 业务目标

| 目标 | 指标 | 时间节点 |
|------|------|----------|
| 用户获取 | 注册用户 1000+ | 上线后 3 个月 |
| 用户活跃 | 月活跃用户 30%+ | 上线后 6 个月 |
| 审查效率 | 平均审查时间 < 2 分钟 | 产品上线时 |
| 准确率 | 风险识别准确率 > 85% | 产品上线时 |

### 3.2 用户体验目标

- 上传到获取结果全流程 < 3 分钟
- 界面操作学习成本 < 5 分钟
- 审查结果可读性评分 > 4.0/5.0

---

## 4. 功能需求

### 4.1 核心功能模块

#### 4.1.1 合同上传模块

**功能描述**: 用户上传待审查的合同文档

**功能详情**:
- 支持 .docx 格式文件上传
- 支持拖拽上传和点击选择两种方式
- 文件大小限制: 最大 10MB
- 自动提取文件名作为合同标题（可编辑）
- 实时显示上传进度
- 上传成功后自动解析文档内容

**验收标准**:
- 上传成功率 > 99%
- 上传响应时间 < 3 秒（5MB 文件）
- 支持的文档格式验证准确率 100%

#### 4.1.2 AI 智能审查模块

**功能描述**: 使用 AI 自动识别合同中的法律风险

**功能详情**:
- 一键启动审查流程
- 自动识别以下风险类型：
  - 违约金条款风险
  - 免责条款公平性
  - 争议解决方式
  - 保密条款完整性
  - 知识产权归属
  - 合同解除条件
  - 支付条款明确性
  - 其他法律风险
- 智能分段处理（超过 4000 tokens 自动分段）
- 问题分级：高风险、中风险、低风险
- 生成审查摘要

**验收标准**:
- 审查完成时间 < 2 分钟（标准合同）
- 风险识别准确率 > 85%
- 问题分类准确率 > 90%

#### 4.1.3 问题定位与批注模块

**功能描述**: 精确定位问题在文档中的位置并生成批注

**功能详情**:
- 精确匹配算法：根据原文定位问题位置
- 模糊匹配算法：相似度阈值 0.7
- 支持章节范围搜索
- 自动在 Word 文档中添加批注
- 批注内容包含：
  - 问题类别
  - 风险等级
  - 问题描述
  - 修改建议
- 支持红色文字标注高风险问题

**验收标准**:
- 问题定位准确率 > 80%
- 批注生成成功率 > 95%
- 批注内容完整性 100%

#### 4.1.4 审查结果展示模块

**功能描述**: 可视化展示审查结果

**功能详情**:
- 风险统计图表（高/中/低风险数量）
- 问题列表展示：
  - 问题类别
  - 风险等级（颜色标识）
  - 原文引用
  - 问题描述
  - 修改建议
- 审查摘要
- 实时状态更新（处理中/已完成）

**验收标准**:
- 结果展示响应时间 < 1 秒
- 图表渲染正确率 100%
- 支持移动端响应式显示

#### 4.1.5 文件下载模块

**功能描述**: 下载审查结果文件

**功能详情**:
- 下载带批注的 Word 文档
- 下载纯文本审查报告
- 文件命名规则：原文件名_审查结果_日期.docx
- 支持断点续传

**验收标准**:
- 下载成功率 > 99%
- 文件完整性校验 100%
- 下载速度 > 1MB/s

#### 4.1.6 合同管理模块

**功能描述**: 管理历史合同和审查记录

**功能详情**:
- 合同列表展示（按时间倒序）
- 合同详情查看
- 审查历史记录
- 合同搜索功能
- 合同删除功能（待开发）

**验收标准**:
- 列表加载时间 < 2 秒
- 搜索响应时间 < 1 秒
- 支持分页加载

### 4.2 扩展功能模块（待开发）

#### 4.2.1 合同撰写模块

**功能描述**: AI 辅助生成合同文档

**功能详情**:
- 选择合同类型（劳动合同、采购合同、服务合同等）
- 填写合同要素（甲乙方、金额、期限等）
- AI 自动生成合同初稿
- 支持在线编辑和实时预览

#### 4.2.2 合同模板库

**功能描述**: 提供常用合同模板

**功能详情**:
- 分类浏览模板（按行业、类型）
- 模板预览
- 一键使用模板
- 自定义模板保存

#### 4.2.3 用户认证与权限

**功能描述**: 用户注册、登录和权限管理

**功能详情**:
- 邮箱/手机号注册
- 密码登录 / 第三方登录
- 用户角色：免费用户、付费用户、企业用户
- 权限控制：审查次数限制、文件大小限制

#### 4.2.4 合同统计分析

**功能描述**: 数据分析和可视化

**功能详情**:
- 审查次数统计
- 风险类型分布
- 时间趋势分析
- 导出统计报告

---

## 5. 非功能需求

### 5.1 性能要求

| 指标 | 要求 |
|------|------|
| 并发用户数 | 支持 100+ 并发审查任务 |
| 响应时间 | API 响应时间 < 500ms |
| 审查时间 | 标准合同（5000 字）< 2 分钟 |
| 系统可用性 | 99.5% 以上 |
| 数据库查询 | 单次查询 < 100ms |

### 5.2 安全要求

- **数据加密**: 传输层使用 HTTPS，敏感数据加密存储
- **文件安全**: 上传文件病毒扫描，定期清理临时文件
- **访问控制**: 用户只能访问自己的合同数据
- **API 安全**: 实施 API 限流，防止滥用
- **隐私保护**: 符合 GDPR 和国内数据保护法规

### 5.3 可用性要求

- **界面友好**: 符合现代 Web 设计规范
- **操作简单**: 核心流程不超过 3 步
- **错误提示**: 清晰的错误信息和解决建议
- **帮助文档**: 提供操作指南和 FAQ
- **多语言**: 支持中文（优先）、英文

### 5.4 兼容性要求

- **浏览器**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
- **操作系统**: Windows 10+, macOS 10.15+, Linux
- **移动端**: iOS 13+, Android 8+
- **文档格式**: Microsoft Word 2007+ (.docx)

### 5.5 可扩展性要求

- **模块化设计**: 功能模块独立，易于扩展
- **API 设计**: RESTful API，支持第三方集成
- **数据库**: 支持水平扩展
- **微服务架构**: 预留微服务化改造空间

---

## 6. 技术架构

### 6.1 整体架构图

```
┌─────────────────────────────────────────────────────────┐
│                      用户层                              │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │
│  │  Web 浏览器  │  │  移动浏览器  │  │  桌面应用    │  │
│  └──────────────┘  └──────────��───┘  └──────────────┘  │
└─────────────────────────────────────────────────────────┘
                          ↓ HTTPS
┌─────────────────────────────────────────────────────────┐
│                    前端层                                │
│  ┌──────────────────────────────────────────────────┐  │
│  │  React 营销网站 (Vite + TypeScript)              │  │
│  └──────────────────────────────────────────────────┘  │
│  ┌──────────────────────────────────────────────────┐  │
│  │  主应用界面 (原生 JS + Tailwind CSS)             │  │
│  └──────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
                          ↓ REST API
┌─────────────────────────────────────────────────────────┐
│                    后端层                                │
│  ┌──────────────────────────────────────────────────┐  │
│  │  FastAPI 应用服务器 (Python 3.11+)              │  │
│  │  ┌────────────┐  ┌────────────┐  ┌────────────┐ │  │
│  │  │  路由层    │  │  服务层    │  │  工具层    │ │  │
│  │  │  (Routers) │  │ (Services) │  │  (Utils)   │ │  │
│  │  └────────────┘  └────────────┘  └────────────┘ │  │
│  └──────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
         ↓                    ↓                    ↓
┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│  数据存储层  │    │  AI 服务层   │    │  文件存储层  │
│              │    │              │    │              │
│  SQLite DB   │    │  通义千问    │    │  本地文件    │
│  (SQLAlchemy)│    │  API         │    │  系统        │
└──────────────┘    └──────────────┘    └──────────────┘
```

### 6.2 技术栈选型

#### 6.2.1 后端技术栈

| 技术 | 版本 | 用途 |
|------|------|------|
| Python | 3.11+ | 编程语言 |
| FastAPI | 0.115.0 | Web 框架 |
| Uvicorn | 0.32.0 | ASGI 服务器 |
| SQLAlchemy | 2.0.0 | ORM 框架 |
| Pydantic | 2.10.0 | 数据验证 |
| python-docx | 1.1.2 | Word 文档处理 |
| OpenAI SDK | 1.57.0 | AI 模型调用 |
| aiosqlite | 0.20.0 | 异步数据库驱动 |

#### 6.2.2 前端技术栈

| 技术 | 版本 | 用途 |
|------|------|------|
| React | 19.2.0 | UI 框架（营销网站） |
| TypeScript | 5.9.3 | 类型安全 |
| Vite | 7.2.4 | 构建工具 |
| Tailwind CSS | 4.1.18 | CSS 框架 |
| Mammoth.js | 1.6.0 | .docx 文件解析 |
| Axios | 1.13.2 | HTTP 客户端 |

#### 6.2.3 AI 服务

| 服务 | 模型 | 用途 |
|------|------|------|
| 通义千问 | qwen-plus / qwen3-max | 合同审查 |
| API Base | https://dashscope.aliyuncs.com/compatible-mode/v1 | API 端点 |

### 6.3 核心模块设计

#### 6.3.1 文档解析模块 (DocumentParser)

**文件位置**: [backend/utils/document_parser.py](backend/utils/document_parser.py)

**职责**: 解析 Word 文档，提取文本和结构信息

**核心功能**:
- 提取段落文本和样式
- 提取表格内容
- 识别文档结构（标题、章节）
- 估算 Token 数量
- 判断是否需要分段

**关键算法**:
```python
# Token 估算
中文: 1.5 字符 = 1 token
英文: 4 字符 = 1 token

# 分段阈值
max_tokens_per_section = 4000
```

#### 6.3.2 AI 审查模块 (AIReviewer)

**文件位置**: [backend/services/review_service.py](backend/services/review_service.py)

**职责**: 调用 AI 模型进行合同审查

**核心功能**:
- 构建审查 Prompt
- 调用通义千问 API
- 解析 AI 返回结果
- 重试机制（最多 3 次）
- 错误处理

**审查要点**:
1. 违约金条款
2. 免责条款
3. 争议解决方式
4. 保密条款
5. 知识产权
6. 合同解除条件
7. 支付条款
8. 其他法律风险

#### 6.3.3 问题定位模块 (LocationMatcher)

**文件位置**: [backend/utils/location_matcher.py](backend/utils/location_matcher.py)

**职责**: 精确定位问题在文档中的位置

**核心功能**:
- 精确匹配（exact_match）
- 模糊匹配（fuzzy_match）
- 章节范围搜索
- 相似度计算

**匹配算法**:
```python
# 精确匹配
if original_text in paragraph_text:
    return location

# 模糊匹配
similarity = SequenceMatcher(None, text1, text2).ratio()
if similarity >= 0.7:
    return location
```

#### 6.3.4 批注生成模块 (CommentGenerator)

**文件位置**: [backend/utils/comment_generator.py](backend/utils/comment_generator.py)

**职责**: 在 Word 文档中添加批注

**核心功能**:
- XML 批注生成
- 内联红色文字标注
- 风险等级标识
- 批注内容格式化

**批注格式**:
```
【{风险等级}风险】{问题类别}
问题: {问题描述}
建议: {修改建议}
```

---

## 7. 数据模型

### 7.1 数据库设计

#### 7.1.1 Contract 表（合同表）

| 字段名 | 类型 | 说明 | 约束 |
|--------|------|------|------|
| id | String | 合同ID | PK, UUID |
| user_id | String | 用户ID | NOT NULL |
| title | String | 合同标题 | NOT NULL |
| original_filename | String | 原始文件名 | NOT NULL |
| file_path | String | 文件存储路径 | NOT NULL |
| content_text | Text | 提取的文本内容 | - |
| status | String | 状态 | pending/reviewing/completed |
| source | String | 来源 | upload/from_contract |
| created_at | DateTime | 创建时间 | NOT NULL |
| updated_at | DateTime | 更新时间 | NOT NULL |

#### 7.1.2 ReviewRecord 表（审查记录表）

| 字段名 | 类型 | 说明 | 约束 |
|--------|------|------|------|
| id | String | 审查ID | PK, UUID |
| contract_id | String | 关联合同ID | FK, NOT NULL |
| user_id | String | 用户ID | NOT NULL |
| issues | JSON | 问题列表 | - |
| summary | String | 审查摘要 | - |
| high_risk_count | Integer | 高风险数量 | DEFAULT 0 |
| medium_risk_count | Integer | 中风险数量 | DEFAULT 0 |
| low_risk_count | Integer | 低风险数量 | DEFAULT 0 |
| reviewed_file_path | String | 带批注文件路径 | - |
| report_path | String | 报告文件路径 | - |
| status | String | 状态 | pending/processing/completed/failed |
| error_message | Text | 错误信息 | - |
| created_at | DateTime | 创建时间 | NOT NULL |
| completed_at | DateTime | 完成时间 | - |

**关系**: Contract 1:N ReviewRecord

### 7.2 数据结构

#### 7.2.1 IssueInfo（问题信息）

```json
{
  "category": "违约金",
  "severity": "高",
  "location_hint": "第3条第2款",
  "original_text": "违约金比例为30%",
  "problem": "违约金过高，可能被法院认定为过分高于实际损失",
  "suggestion": "建议调整为20%以内，或明确约定损失计算方式"
}
```

#### 7.2.2 ReviewResult（审查结果）

```json
{
  "issues": [IssueInfo],
  "summary": "共发现 5 个风险点，其中高风险 2 个...",
  "total_issues": 5,
  "high_risk_count": 2,
  "medium_risk_count": 2,
  "low_risk_count": 1
}
```

---

## 8. API 设计

### 8.1 API 端点列表

| 端点 | 方法 | 功能 | 请求参数 | 响应 |
|------|------|------|----------|------|
| `/` | GET | 根路径 | - | 系统信息 |
| `/health` | GET | 健康检查 | - | `{"status": "healthy"}` |
| `/api/reviews/upload` | POST | 上传合同 | file (multipart), title (optional) | `UploadResponse` |
| `/api/reviews/{contract_id}/start` | POST | 开始审查 | contract_id (path) | `ReviewResponse` |
| `/api/reviews/{review_id}` | GET | 获取审查结果 | review_id (path) | `ReviewResponse` |
| `/api/reviews/{review_id}/download` | GET | 下载带批注文档 | review_id (path) | File (docx) |
| `/api/reviews/{review_id}/report` | GET | 下载审查报告 | review_id (path) | File (txt) |
| `/api/reviews/contracts` | GET | 获取合同列表 | - | `List[ContractResponse]` |
| `/api/reviews/contracts/{contract_id}` | GET | 获取合同详情 | contract_id (path) | `ContractResponse` |

### 8.2 API 详细说明

#### 8.2.1 上传合同

**端点**: `POST /api/reviews/upload`

**请求**:
```
Content-Type: multipart/form-data

file: <binary>
title: "采购合同" (optional)
```

**响应**:
```json
{
  "contract_id": "uuid-string",
  "title": "采购合同",
  "original_filename": "contract.docx",
  "status": "pending",
  "created_at": "2026-01-28T10:00:00Z"
}
```

#### 8.2.2 开始审查

**端点**: `POST /api/reviews/{contract_id}/start`

**响应**:
```json
{
  "review_id": "uuid-string",
  "contract_id": "uuid-string",
  "status": "processing",
  "created_at": "2026-01-28T10:01:00Z"
}
```

#### 8.2.3 获取审查结果

**端点**: `GET /api/reviews/{review_id}`

**响应**:
```json
{
  "review_id": "uuid-string",
  "contract_id": "uuid-string",
  "status": "completed",
  "issues": [
    {
      "category": "违约金",
      "severity": "高",
      "location_hint": "第3条第2款",
      "original_text": "违约金比例为30%",
      "problem": "违约金过高",
      "suggestion": "建议调整为20%以内"
    }
  ],
  "summary": "共发现 5 个风险点...",
  "high_risk_count": 2,
  "medium_risk_count": 2,
  "low_risk_count": 1,
  "created_at": "2026-01-28T10:01:00Z",
  "completed_at": "2026-01-28T10:02:30Z"
}
```

### 8.3 错误处理

| 状态码 | 说明 | 示例 |
|--------|------|------|
| 200 | 成功 | - |
| 400 | 请求参数错误 | 文件格式不支持 |
| 404 | 资源不存在 | 合同ID不存在 |
| 413 | 文件过大 | 文件超过10MB |
| 500 | 服务器错误 | AI服务调用失败 |

---

## 9. 用户界面设计

### 9.1 主应用布局

```
┌─────────────────────────────────────────────────────────────┐
│  ContractFlow Logo                          [用户] [设置]   │
├──────┬──────────────────────────────────────────────────────┤
│      │                                                       │
│  📝  │                                                       │
│ 编写 │                                                       │
│      │                                                       │
│  🔍  │              主内容区域                               │
│ 审查 │          (可滚动，支持编辑)                           │
│      │                                                       │
│  📋  │                                                       │
│ 模板 │                                                       │
│      │                                                       │
│  📁  │                                                       │
│ 管理 │                                                       │
│      │                                                       │
│  📊  │                                                       │
│ 统计 │                                                       │
│      │                                                       │
│  🏢  │                                                       │
│ 商家 │                                                       │
│      │                                                       │
│  ⚙️  │                                                       │
│ 设置 │                                                       │
│      │                                                       │
└──────┴──────────────────────────────────────────────────────┘
```

### 9.2 合同审查页面流程

#### 9.2.1 步骤1：上传合同

```
┌─────────────────────────────────────────────────────────────┐
│                     合同审查                                 │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│              ┌─────────────────────────────┐                │
│              │                             │                │
│              │    📄 拖拽文件到此处         │                │
│              │    或点击选择文件            │                │
│              │                             │                │
│              │    支持 .docx 格式          │                │
│              │    最大 10MB                │                │
│              │                             │                │
│              └─────────────────────────────┘                │
│                                                              │
│              [选择文件]                                      │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

#### 9.2.2 步骤2：审查中

```
┌─────────────────────────────────────────────────────────────┐
│  采购合同.docx                              [开始审查]       │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  ⏳ 正在审查中...                                            │
│                                                              │
│  ████████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ 45%            │
│                                                              │
│  已完成：                                                    │
│  ✓ 文档解析                                                  │
│  ✓ 内容分析                                                  │
│  ⏳ AI 审查中...                                             │
│  ⏸ 生成批注                                                  │
│  ⏸ 生成报告                                                  │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

#### 9.2.3 步骤3：查看结果

```
┌─────────────────────────────────────────────────────────────┐
│  采购合同.docx                    [下载批注文档] [下载报告]  │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  审查完成 ✓                                                  │
│                                                              │
│  ┌──────────────────────────────────────────────────────┐  │
│  │  风险统计                                             │  │
│  │  ┌────────┐  ┌────────┐  ┌────────┐                 │  │
│  │  │ 高风险 │  │ 中风险 │  │ 低风险 │                 │  │
│  │  │   2    │  │   3    │  │   1    │                 │  │
│  │  └────────┘  └────────┘  └────────┘                 │  │
│  └──────────────────────────────────────────────────────┘  │
│                                                              │
│  问题列表：                                                  │
│  ┌──────────────────────────────────────────────────────┐  │
│  │ 🔴 高风险 | 违约金                                    │  │
│  │ 位置：第3条第2款                                      │  │
│  │ 原文："违约金比例为30%"                               │  │
│  │ 问题：违约金过高，可能被法院认定为过分高于实际损失    │  │
│  │ 建议：建议调整为20%以内，或明确约定损失计算方式      │  │
│  └──────────────────────────────────────────────────────┘  │
│                                                              │
│  ┌──────────────────────────────────────────────────────┐  │
│  │ 🟡 中风险 | 保密条款                                  │  │
│  │ ...                                                   │  │
│  └──────────────────────────────────────────────────────┘  │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

### 9.3 设计规范

#### 9.3.1 颜色系统

| 用途 | 颜色 | 色值 |
|------|------|------|
| 主色 | 蓝色 | #3B82F6 |
| 高风险 | 红色 | #EF4444 |
| 中风险 | 黄色 | #F59E0B |
| 低风险 | 绿色 | #10B981 |
| 背景 | 白色/灰色 | #FFFFFF / #F3F4F6 |
| 文字 | 深灰 | #1F2937 |

#### 9.3.2 交互规范

- 按钮悬停：颜色加深 10%
- 加载状态：显示进度条或旋转图标
- 错误提示：红色边框 + 错误图标 + 错误信息
- 成功提示：绿色边框 + 成功图标 + 成功信息

---

## 10. 业务流程

### 10.1 完整审查流程

```
用户上传合同 (.docx)
    ↓
前端：显示上传进度
    ↓
后端：保存文件 + 解析内容
    ↓
后端：创建 Contract 记录
    ↓
前端：显示合同信息
    ↓
用户点击"开始审查"
    ↓
后端：创建 ReviewRecord (status: processing)
    ↓
后端：启动异步审查任务
    ↓
前端：轮询查询审查状态
    ↓
后端异步任务：
    ├─ 解析文档结构
    ├─ 判断是否需要分段
    ├─ 调用通义千问 API
    ├─ 解析 AI 返回的 JSON
    ├─ 定位问题在文档中的位置
    ├─ 生成 Word 批注
    ├─ 生成审查报告
    └─ 更新 ReviewRecord (status: completed)
    ↓
前端：获取���查结果
    ↓
前端：展示风险统计和问题列表
    ↓
用户下载文件
    ├─ 带批注的 Word 文档
    └─ 审查报告 (TXT)
```

### 10.2 错误处理流程

```
任何步骤发生错误
    ↓
捕获异常信息
    ↓
更新 ReviewRecord (status: failed, error_message)
    ↓
前端显示错误信息
    ↓
提供重试选项
```

---

## 11. 项目里程碑

### 11.1 开发阶段

| 阶段 | 功能 | 状态 |
|------|------|------|
| Phase 1 | 核心审查功能 | ✅ 已完成 |
| | - 文件上传 | ✅ |
| | - AI 审查 | ✅ |
| | - 问题定位 | ✅ |
| | - 批注生成 | ✅ |
| | - 结果下载 | ✅ |
| Phase 2 | 前端完善 | 🚧 进行中 |
| | - React 主应用 | ⏸ 待开发 |
| | - 响应式设计 | ⏸ 待开发 |
| | - 用户体验优化 | ⏸ 待开发 |
| Phase 3 | 用户系统 | ⏸ 待开发 |
| | - 用户注册登录 | ⏸ 待开发 |
| | - 权限管理 | ⏸ 待开发 |
| | - 套餐订阅 | ⏸ 待开发 |
| Phase 4 | 扩展功能 | ⏸ 待开发 |
| | - 合同撰写 | ⏸ 待开发 |
| | - 模板库 | ⏸ 待开发 |
| | - 统计分析 | ⏸ 待开发 |

### 11.2 上线计划

| 里程碑 | 目标 | 预期时间 |
|--------|------|----------|
| MVP 上线 | 核心审查功能可用 | 已完成 |
| Beta 测试 | 邀请 50 名��户测试 | 待定 |
| 正式发布 | 公开上线，开放注册 | 待定 |
| 功能迭代 | 根据用户反馈优化 | 持续进行 |

---

## 12. 风险与挑战

### 12.1 技术风险

| 风险 | 影响 | 应对措施 |
|------|------|----------|
| AI 审查准确率不足 | 用户信任度下降 | 持续优化 Prompt，引入人工复核机制 |
| 问题定位不准确 | 批注位置错误 | 改进匹配算法，增加人工校正功能 |
| 大文件处理性能 | 审查时间过长 | 优化分段算法，引入缓存机制 |
| API 调用失败 | 服务不可用 | 实施重试机制，提供降级方案 |
| 并发处理能力 | 高峰期响应慢 | 引入消息队列，增加服务器资源 |

### 12.2 业务风险

| 风险 | 影响 | 应对措施 |
|------|------|----------|
| 用户获取成本高 | 增长缓慢 | 优化营销策略，提供免费试用 |
| 竞品压力 | 市场份额下降 | 强化差异化优势，提升用户体验 |
| 法律合规问题 | 法律纠纷 | 添加免责声明，建议用户人工复核 |
| 数据安全问题 | 用户隐私泄露 | 加强数据加密，定期安全审计 |
| 盈利模式不清晰 | 无法持续运营 | 探索多种变现方式（订阅、企业版） |

### 12.3 运营风险

| 风险 | 影响 | 应对措施 |
|------|------|----------|
| 用户留存率低 | 活跃度下降 | 提升产品价值，增加用户粘性功能 |
| 客户支持压力 | 用户满意度下降 | 完善帮助文档，建立客服团队 |
| 成本控制困难 | 亏损运营 | 优化 AI 调用次数，引入成本监控 |

---

## 13. 附录

### 13.1 术语表

| 术语 | 说明 |
|------|------|
| AI 审查 | 使用人工智能模型自动识别合同风险 |
| 批注 | 在 Word 文档中添加的评论和标注 |
| 问题定位 | 确定问题在文档中的具体位置 |
| 风险等级 | 高/中/低三个级别的风险分类 |
| Token | AI 模型处理文本的基本单位 |

### 13.2 参考资料

- FastAPI 官方文档: https://fastapi.tiangolo.com/
- 通义千问 API 文档: https://help.aliyun.com/zh/dashscope/
- python-docx 文档: https://python-docx.readthedocs.io/
- React 官方文档: https://react.dev/

### 13.3 项目文件结构

详见项目代码库：
- 后端代码: [backend/](backend/)
- 前端代码: [contract-suite-website/](contract-suite-website/)
- 主应用: [index.html](index.html)
- 配置文件: [.env](.env)
- 启动脚本: [start.bat](start.bat)

---

## 14. 总结

ContractFlow 是一款功能完整、技术先进的 AI 合同审查系统。核心功能已经实现并可用，包括文件上传、AI 智能审查、问题定位、批注生成和结果下载等。系统采用现代化的技术栈（FastAPI + React + 通义千问），具有良好的可扩展性和维护性。

**核心优势**:
1. 智能化的 AI 审查能力
2. 精确的问题定位算法
3. 完整的异步处理流程
4. 清晰的模块化架构
5. 良好的用户体验设计

**适用场景**:
- 法律事务所合同审查
- 企业合同管理
- 个人合同风险评估
- 合同模板生成

该项目已具备 MVP（最小可行产品）的所有功能，可以直接用于演示和小规模使用。后续可以根据用户反馈逐步完善前端界面、增加用户管理、扩展审查规则等功能。

---

**文档结束**

*本文档由 Claude Sonnet 4.5 生成*
*最后更新: 2026-01-28*
